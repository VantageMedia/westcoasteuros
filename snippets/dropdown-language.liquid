{% comment %}
  Renders the language dropdown

  Accepts:
  - id: {String} Form id suffix. Optional
  - classname: {String} Additional dropdown classes. Optional

  Usage:
  {% render 'collection-language' %}
{% endcomment %}

{{ 'component-dropdown.css' | asset_url | stylesheet_tag }}

<localization-form>
  {%- assign form_id = 'LanguageForm' | append: id -%}
  {%- form 'localization', id: form_id, class: 'localization-form' -%}
    <div class="dropdown {{ classname }}">
      <h2 class="visually-hidden" id="LanguageLabel{{ id }}">
        {{ 'localization.language_label' | t }}
      </h2>
      <button
        class="dropdown-toggle"
        type="button"
        aria-expanded="false"
        aria-controls="LanguageList{{ id }}"
        aria-describedby="LanguageLabel{{ id }}"
      >
        <span class="dropdown-toggle-label">{{ localization.language.iso_code }}</span>
        {% render 'icons', icon: 'angle' %}
      </button>

      <div
        class="dropdown-list-wrap color-background-1 background-complementary"
        aria-hidden="true"
      >
        <div class="dropdown-list-wrap-scroll">
          <ul class="dropdown-list" id="LanguageList{{ id }}" role="list">
            {%- for language in localization.available_languages -%}
              <li class="dropdown-list-item">
                <a
                  class="dropdown-list-option"
                  href="#"
                  data-value="{{ language.iso_code }}"
                >
                  {{ language.endonym_name | capitalize }}
                </a>
              </li>
            {%- endfor -%}
          </ul>
        </div>
      </div>

      <input type="hidden" name="locale_code" value="{{ localization.language.iso_code }}">
    </div>
  {%- endform -%}
</localization-form>

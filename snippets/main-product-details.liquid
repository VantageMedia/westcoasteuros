{% comment %}
  Renders the product's "Product details" block.

  Accepts:
  - product: {Object} The product.
  - block: {Object} The block.
  - show_title: {Boolean} Whether to show the title/icon element. Default true.

  Usage:
  {% render 'main-product-details', product: product, block: block %}
{% endcomment %}

{% capture output %}
  {% if block.settings.show_type and product.type != blank %}
    <li class="product-info-details-item product-info-details-type">
      <span class="product-info-details-item-label">{{ 'products.product.type' | t }}</span>
      <span class="product-info-details-item-value">{{ product.type }}</span>
    </li>
  {% endif %}
  {% if block.settings.show_vendor and product.vendor != blank %}
    <li class="product-info-details-item product-info-details-vendor">
      <span class="product-info-details-item-label">{{ 'products.product.vendor' | t }}</span>
      <span class="product-info-details-item-value">{{ product.vendor }}</span>
    </li>
  {% endif %}
  {% if block.settings.show_sku and product.selected_or_first_available_variant.sku != blank %}
		<li class="product-info-details-item product-info-details-sku product-info-details-variant-field">
      <span class="product-info-details-item-label">{{ 'products.product.sku' | t }}</span>
      <span class="product-info-details-item-value">{{ product.selected_or_first_available_variant.sku }}</span>
    </li>
  {% endif %}
  {% if block.settings.show_barcode and product.selected_or_first_available_variant.barcode != blank %}
		<li class="product-info-details-item product-info-details-barcode product-info-details-variant-field">
      <span class="product-info-details-item-label">{{ block.settings.barcode_label }}</span>
      <span class="product-info-details-item-value">{{ product.selected_or_first_available_variant.barcode }}</span>
    </li>
  {% endif %}

  {% render 'product-metafields', product: product, metafields_list: block.settings.metafields %}
{% endcapture %}

{% if product == blank %}
  {% capture output %}
    {% if block.settings.show_type %}
      <li class="product-info-details-item product-info-details-type">
        <span class="product-info-details-item-label">{{ 'products.product.type' | t }}</span>
        <span class="product-info-details-item-value">{{ 'onboarding.product_type' | t }}</span>
      </li>
    {% endif %}
    {% if block.settings.show_vendor %}
      <li class="product-info-details-item product-info-details-vendor">
        <span class="product-info-details-item-label">{{ 'products.product.vendor' | t }}</span>
        <span class="product-info-details-item-value">{{ 'onboarding.vendor' | t }}</span>
      </li>
    {% endif %}
    {% if block.settings.show_sku %}
      <li class="product-info-details-item product-info-details-sku">
        <span class="product-info-details-item-label">{{ 'products.product.sku' | t }}</span>
        <span class="product-info-details-item-value">SKU123</span>
      </li>
    {% endif %}
    {% if block.settings.show_barcode %}
      <li class="product-info-details-item product-info-details-barcode">
        <span class="product-info-details-item-label">{{ block.settings.barcode_label }}</span>
        <span class="product-info-details-item-value">1234567890</span>
      </li>
    {% endif %}

    {% render 'product-metafields', product: product, metafields_list: block.settings.metafields %}
  {% endcapture %}
{% endif %}

{% if output != blank or request.design_mode %}
  <div
    id="ProductInfoDetails-{{ section.id }}-{{ block.id }}-{{ forloop.index0 }}"
    class="product-info-details"
    {{ block.shopify_attributes }}
  >
    {% if show_title != false and block.settings.title != blank %}
      <p class="product-info-details-title h5">
        {% if block.settings.icon != blank %}
          {% render 'icons', icon: block.settings.icon %}
        {% endif %}
        {{ block.settings.title }}
      </p>
    {% endif %}

    {% if block.settings.text_position == 'before' and block.settings.text != blank %}
      <div class="product-info-details-text rte">
        {{ block.settings.text }}
      </div>
    {% endif %}

    <ul class="product-info-details-list">
      {{ output }}
    </ul>

    {% if block.settings.text_position == 'after' and block.settings.text != blank %}
      <div class="product-info-details-text rte">
        {{ block.settings.text }}
      </div>
    {% endif %}
  </div>
{% endif %}
